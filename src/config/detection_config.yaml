# Global Configuration
system:
  fps: 30.0

# Drowsiness Detector Configuration
drowsiness:
  start_threshold_sec: 0.8        # Time of low EAR to START episode
  end_grace_sec: 1.5              # Time of normal EAR to END episode
  min_episode_sec: 2.0            # Minimum episode duration to log
  ear_low_threshold: 0.22         # Eyes considered closed
  ear_high_threshold: 0.26        # Eyes considered open
  ear_drop_threshold: 0.10        # Sudden drop size (ear trend; kept for analytics)

# Distraction Detector Configuration
distraction:
  yaw_threshold: 35.0             # Looking Side
  pitch_down_threshold: 28.0      # Looking Dashboard
  pitch_up_threshold: 25.0        # Looking Up
  roll_threshold: 30.0            # Head Tilt
  time_hands_visible: 2.0         # Seconds hands visible before alert
  time_gaze: 2.5                  # Seconds before alert

  # Phone Use posture band (for phone detection logic)
  phone_pitch_min: 18.0
  phone_pitch_max: 38.0

  # Time Limits (Seconds before alert)
  time_gaze: 2.5                  # Normal looking away
  time_phone: 1.0                 # Phone use (stricter)
  time_hand_face: 2.0             # Eating/Smoking

  # Zones (0.0 - 1.0)
  phone_zone_y_max: 0.55
  phone_zone_x_outer: 0.25
  wheel_zone_y_min: 0.65

# Blink Detection
blink:
  closed_frames: 2                # Frames with eyes closed = 1 blink

# Yawn Detection
yawn:
  threshold_sec: 0.4              # Time with mouth open to detect yawn
  cooldown_sec: 3.0               # Cooldown before next yawn
  hand_mouth_dist: 0.15           # Distance for "Hand covering mouth"

# Expression Suppression
expression:
  smile_suppress_sec: 0.5
  laugh_suppress_sec: 1.0

# Fainting Detection (new dedicated section)
fainting:
  # Core thresholds
  pitch_extreme: 45.0             # Chin-to-chest extreme pitch relative to camera calibration
  rapid_change: 12.0              # Rapid pitch drop (deg) over history window
  history_sec: 0.5                # Window to evaluate rapid change

  # Phone-like posture band (to demote faint risk when plausible phone use)
  phone_pitch_min: 18.0
  phone_pitch_max: 38.0

  # Variance/slope heuristics
  var_stable_max: 5.0             # Pitch variance to consider stable
  var_unstable_min: 10.0          # Pitch variance to consider unstable
  extreme_frames_min: 5           # Min frames with extreme pitch to mark unstable
  face_slump_trend_min: 0.005     # Slope of face y trend indicating slump

  # Decision threshold
  prob_threshold: 0.6             # Probability threshold to trigger fainting event