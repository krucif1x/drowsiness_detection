# Drowsiness Detector Configuration
# All time-based thresholds in SECONDS (converted to frames at runtime)

# Episode Detection
drowsiness:
  start_threshold_sec: 0.5        # Time of low EAR to START episode
  end_grace_sec: 1.5              # Time of normal EAR to END episode
  min_episode_sec: 2.0            # Minimum episode duration to log
  
# Blink Detection
blink:
  closed_frames: 2                # Frames with eyes closed = 1 blink

# Yawn Detection
yawn:
  threshold_sec: 0.27             # Time with mouth open to detect yawn
  cooldown_sec: 2.0               # Cooldown before next yawn can be logged

# Expression Suppression (prevent false drowsiness during smiles/laughs)
expression:
  smile_suppress_sec: 0.5         # Suppress drowsiness after smile
  laugh_suppress_sec: 0.67        # Suppress drowsiness after laugh

# User Recognition
user:
  swap_threshold: 0.8             # Face encoding distance for user swap

# Image Quality
image:
  local_quality: 85               # JPEG quality for local SQLite (0-100)
  remote_quality: 70              # JPEG quality for remote server (0-100)

# System Settings
system:
  vin: "VIN-0001"
  target_fps: 30.0

# Fainting Detection
fainting:
  pitch_extreme: 45.0        # deg above camera pitch
  rapid_change: 12.0         # deg over history window
  history_sec: 0.6           # seconds for pitch/face trend
  vis_window_sec: 0.6        # seconds for visibility smoothing
  face_slump_trend_min: 0.006  # downward slope threshold
  min_confirm_sec: 1.0       # require sustained indicators
  phone_pitch_min: 18.0
  phone_pitch_max: 38.0
  var_stable_max: 5.0        # variance threshold for stable phone posture
  var_unstable_min: 10.0
  vis_face_thr: 0.40         # min face visibility to count as visible
  vis_sh_thr: 0.35           # min shoulder visibility
  prob_threshold: 0.75       # final probability to declare fainting